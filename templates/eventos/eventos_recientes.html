{% extends "base.html" %}
{% block title %}Eventos recientes{% endblock %}

{% block content %}
  <h2>Eventos recientes</h2>
  <p>Estos son los últimos eventos registrados en la plataforma.</p>

  {% if eventos %}
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1rem;margin-top:1rem;">
      {% for e in eventos %}
        <article style="border:1px solid #e5e7eb;border-radius:0.75rem;padding:1rem;">
          <h3 style="margin:0 0 .25rem 0;font-size:1.1rem;">
            <a href="{% url 'eventos:detalle' e.pk %}" style="text-decoration:none;color:#111827;">
              {{ e.nombre }}
            </a>
          </h3>
          <p style="margin:0;"><strong>Fecha:</strong> {{ e.fecha }}</p>
          {% if e.ubicacion %}
            <p style="margin:0;"><strong>Ubicación:</strong> {{ e.ubicacion }}</p>
          {% endif %}
          <p style="margin:.25rem 0 0 0;"><strong>Participantes:</strong> {{ e.participantes.count }}</p>
        </article>
      {% endfor %}
    </div>

    <div style="margin-top:1.5rem;display:flex;flex-wrap:wrap;gap:.5rem;">
      <a href="{% url 'eventos:listar' %}" class="btn">Ver todos los eventos</a>
      {% if request.user.is_authenticated %}
        <a href="{% url 'eventos:registrar' %}" class="btn">+ Registrar nuevo evento</a>
      {% endif %}
    </div>
  {% else %}
    <p>No hay eventos registrados aún.</p>
    {% if request.user.is_authenticated %}
      <a href="{% url 'eventos:registrar' %}" class="btn">Crear el primer evento</a>
    {% else %}
      <a href="{% url 'login' %}" class="btn">Inicia sesión para crear eventos</a>
    {% endif %}
  {% endif %}
{% endblock %}
